<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
  <head>
    <title>Crust</title>
    <meta name="generator" content="emacs-wiki.el">
    <meta http-equiv="Content-Type"
	  content="text/html; charset=gb2312">
    <link rev="made" href="mailto:webmaster@wangyin.com">
    <link rel="home" href="WelcomePage.html">
    <link rel="index" href="WikiIndex.html">
    <LINK rel="stylesheet" href="../main.css" media="screen">
  </head>
  <body>
    <h1>Crust</h1>
    <!-- Page published by Emacs Wiki begins here -->






<p>
How to generate a crust ?

</p>

<p>
Input: a set P of points in the plane

</p>

<p>
Output: a set S of segments with endpoints in P

</p>

<ol>
<li>Construct the Voronoi diagram VD of P.
</li>
<li>Construct the Delaunay triangulation DT of P+V, where V
are the vertices of VD.
</li>
<li>S:= all edges of DT with endpoints in P.
</li>
</ol>

<pre class="example">// examples/Tutorial_SCG99/crust.C
// -------------------------------
#include &quot;tutorial.h&quot;
#include &lt;CGAL/IO/leda_window.h&gt;
#include &lt;CGAL/IO/Ostream_iterator.h&gt;
#include &lt;vector&gt;

struct Tmp_point : public Point {
    static bool init;
    bool delaunay;
    Tmp_point() : delaunay( init) {}
    Tmp_point( const Point&amp; p) : Point(p), delaunay( init) {}
};
bool Tmp_point::init = true;

struct Traits : public EucliTraits {
    typedef Tmp_point Point;
};
typedef CGAL::Triangulation_vertex_base_2&lt;Traits&gt;                  Vb;
typedef CGAL::Triangulation_face_base_2&lt;Traits&gt;                    Fb;
typedef CGAL::Triangulation_default_data_structure_2&lt;Traits,Vb,Fb&gt; Tds;
typedef CGAL::Delaunay_triangulation_2&lt;Traits,Tds&gt;                 Delaunay;


template &lt;class InputIterator, class OutputIterator&gt;
void crust( InputIterator first, InputIterator last, OutputIterator out) {

//generate DT of point set
    Delaunay dt;
    Tmp_point::init = true;
    dt.insert( first, last);


//get voronoi vertices from the DT
    vector&lt;Point&gt; voronoi_vertices;
    voronoi_vertices.reserve( dt.number_of_faces());
    Delaunay::Face_iterator f = dt.faces_begin();
    while ( f != dt.faces_end()) {
	voronoi_vertices.push_back( dt.dual( f));
	++f;
    }


//add the VD vertices into the DT

    Tmp_point::init = false;
    dt.insert( voronoi_vertices.begin(), voronoi_vertices.end());


//find the edges with both endpoints in P

    Delaunay::Edge_iterator e = dt.edges_begin();
    while ( e != dt.edges_end()) {
	Delaunay::Face_handle face = (*e).first;
	int index = (*e).second;
	if ( face-&gt;vertex( dt.cw(  index))-&gt;point().delaunay &amp;&amp;
	     face-&gt;vertex( dt.ccw( index))-&gt;point().delaunay)
	    *out++ = dt.segment(e);
        ++e;
    }
}

int main () {
    Delaunay_triangulation  dt;
    leda_window* window = CGAL::create_and_display_demo_window();
    vector&lt;Point&gt; points;
    while (true) {
	Point p;
	*window &gt;&gt; p;
	if ( ! (*window))
	    break;
	points.push_back( p);
	window-&gt;clear();
	*window &lt;&lt; CGAL::BLACK;
	std::copy( points.begin(), points.end(), 
		   CGAL::Ostream_iterator&lt;Point, leda_window&gt;(*window));
	*window &lt;&lt; CGAL::GREEN;
	crust( points.begin(), points.end(), 
	       CGAL::Ostream_iterator&lt;Segment, leda_window&gt;(*window));
    }
    delete window;
    return 0;
}


</pre>
<!-- Page published by Emacs Wiki ends here -->
    <div class="navfoot">
    <hr>
      <table width="100%" border="0" summary="Footer navigation">
	<tr>
	  <td width="33%" align="left">
	    <span class="footdate">最后更新：2005-04-21</span>
	  </td>
	  <td width="60%" align="center">
	    <span class="foothome">
	      <a href="../index.html">王垠的主页</a> / <a href="WelcomePage.html">WiKi首页</a>/<a href="WikiIndex.html">索引</a>/<a href="wiki_frame.html" target=_parent>框架页</a>/<a href="Crust.html" target=_parent>取消框架</a>
	    </span>
	  </td>
	  <td width="33%" align="right">
	    
	  </td>
	</tr>
      </table>
    </div>


  </body>
</html>
